<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Budget Saver</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: #e8f5e9;
        padding: 20px;
    }

    .container {
        max-width: 360px;
        margin: auto;
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0,0,0,0.15);
    }

    h2 {
        text-align: center;
        color: #2e7d32;
        margin-bottom: 10px;
    }

    label {
        font-weight: bold;
        margin-top: 12px;
        display: block;
        color: #1b5e20;
    }

    input {
        width: 75%;
        padding: 8px;
        margin-top: 5px;
        border: 1px solid #81c784;
        border-radius: 8px;
        background: #f1f8f6;
        font-size: 15px;
    }

    .buttons {
        margin-top: 20px;
        display: flex;
        justify-content: space-between;
    }

    button {
        width: 32%;
        padding: 12px;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        color: white;
        cursor: pointer;
    }

    .home { background: #9e9e9e; }
    .save { background: #388e3c; }
    .next { background: #43a047; }
</style>
</head>

<body>

<div class="container">

    <h2>Budget Saver</h2>

    <label>Main Salary</label>
    <input type="number" id="salary" placeholder="Enter salary">

    <label>Part-Time Salary</label>
    <input type="number" id="partTime" placeholder="Enter part-time salary">

    <div class="buttons">
        <button class="home" onclick="goHome()">Home</button>
        <button class="save" onclick="saveData()">Save</button>
        <button class="next" onclick="goNext()">Next</button>
    </div>

</div>

<!-- Firebase Script -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

    // Your Firebase config
    const firebaseConfig = {
        apiKey: "AIzaSyA3q1drfYYuq0MGztqr8T6Cq42RGKmiVno",
        authDomain: "budgetcalculator-22ef5.firebaseapp.com",
        projectId: "budgetcalculator-22ef5",
        storageBucket: "budgetcalculator-22ef5.firebasestorage.app",
        messagingSenderId: "574952478496",
        appId: "1:574952478496:web:0ac32ab61ec6b130db2945",
        measurementId: "G-2LL0GD2K30",
        databaseURL: "https://budgetcalculator-22ef5-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Load saved values from Firebase on page load
    window.onload = async function () {
        try {
            const salarySnap = await get(ref(db, "salary"));
            const partSnap = await get(ref(db, "partTime"));

            if (salarySnap.exists()) {
                document.getElementById("salary").value = salarySnap.val();
            }

            if (partSnap.exists()) {
                document.getElementById("partTime").value = partSnap.val();
            }
        } catch (error) {
            console.error("Error loading data:", error);
            alert("Failed to load saved data.");
        }
    };

    // Save to Firebase
    async function saveData() {
        const salaryVal = document.getElementById("salary").value;
        const partVal = document.getElementById("partTime").value;

        try {
            await set(ref(db, "salary"), salaryVal);
            await set(ref(db, "partTime"), partVal);

            alert("Saved!");
        } catch (error) {
            console.error("Error saving:", error);
            alert("Failed to save data.");
        }
    }

    function goNext() {
        window.location.href = "Commitment.html";
    }

    function goHome() {
        window.location.href = "Home.html";
    }
</script>

</body>
</html>
